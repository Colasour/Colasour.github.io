(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{325:function(t,s,a){"use strict";a.r(s);var n=a(35),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"frontmatter-title"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#frontmatter-title"}},[t._v("#")]),t._v(" "+t._s(t.$frontmatter.title))]),t._v(" "),n("h2",{attrs:{id:"数据类型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据类型"}},[t._v("#")]),t._v(" 数据类型")]),t._v(" "),n("p",[t._v("JavaScript 语言的每一个值都属于某一种数据类型。JavaScript 语言规定了 8 种语言类型：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(555),alt:"数据类型"}})]),t._v(" "),n("p",[t._v("前面的 7 种数据类型称为"),n("strong",[t._v("原始类型")]),t._v("；最后 1 个对象类型称为"),n("strong",[t._v("引用类型")]),t._v("。")]),t._v(" "),n("p",[t._v("JavaScript 中还有一些对象子类型，通常被称为"),n("strong",[t._v("内置对象")]),t._v("：")]),t._v(" "),n("p",[n("code",[t._v("String")]),t._v("、"),n("code",[t._v("Number")]),t._v("、"),n("code",[t._v("Boolean")]),t._v("、"),n("code",[t._v("Object")]),t._v("、"),n("code",[t._v("Function")]),t._v("、"),n("code",[t._v("Array")]),t._v("、"),n("code",[t._v("Date")]),t._v("、"),n("code",[t._v("RegExp")]),t._v("、"),n("code",[t._v("Error")])]),t._v(" "),n("p",[t._v("除了这七种语言类型，还有一些语言的实现者更关心的规范类型：")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("List")]),t._v(" 和 "),n("code",[t._v("Record")]),t._v("：描述函数传参过程")]),t._v(" "),n("li",[n("code",[t._v("Set")]),t._v("：主要用于解释字符集等")]),t._v(" "),n("li",[n("code",[t._v("Completion Record")]),t._v("：用于描述异常，跳出等语句执行过程")]),t._v(" "),n("li",[n("code",[t._v("Reference")]),t._v("：用于描述对象属性访问，"),n("code",[t._v("delete")]),t._v(" 等")]),t._v(" "),n("li",[n("code",[t._v("Property Descriptor")]),t._v("：用于描述对象的属性")]),t._v(" "),n("li",[n("code",[t._v("Lexical Environment")]),t._v(" 和 "),n("code",[t._v("Environment Record")]),t._v("：用于描述变量和作用域")]),t._v(" "),n("li",[n("code",[t._v("Data Block")]),t._v("：用于描述二进制数据")])]),t._v(" "),n("h3",{attrs:{id:"undefined、null"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#undefined、null"}},[t._v("#")]),t._v(" Undefined、Null")]),t._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[t._v("问题")]),t._v(" "),n("p",[t._v("为何有的编程规范要求用 "),n("code",[t._v("void 0")]),t._v(" 代替 "),n("code",[t._v("undefined")]),t._v("？")])]),t._v(" "),n("p",[n("code",[t._v("Undefined")]),t._v(" 类型表示未定义，它的类型只有一个值 "),n("code",[t._v("undefined")]),t._v("。任何变量在赋值前是 "),n("code",[t._v("Undefined")]),t._v(" 类型、值为 "),n("code",[t._v("undefined")]),t._v("。")]),t._v(" "),n("p",[t._v("一般可以用全局变量 "),n("code",[t._v("undefined")]),t._v("（即命名为 "),n("code",[t._v("'undefined'")]),t._v(" 的变量）来表达这个值，或者 "),n("code",[t._v("void")]),t._v(" 运算把任意一个表达式变成 "),n("code",[t._v("undefined")]),t._v(" 值。")]),t._v(" "),n("p",[t._v("因为 JavaScript 的 "),n("code",[t._v("undefined")]),t._v(" 是一个变量，而非是一个关键字，这是 JavaScript 语言公认的设计失误之一。所以，"),n("strong",[t._v("为了避免无意中被篡改，建议使用 "),n("code",[t._v("void 0")]),t._v(" 来获取 "),n("code",[t._v("undefined")]),t._v(" 值")]),t._v("。")]),t._v(" "),n("p",[n("code",[t._v("Undefined")]),t._v(" 跟 "),n("code",[t._v("Null")]),t._v(" 有一定的表意差别，"),n("code",[t._v("Null")]),t._v(" 表示的是“定义了但是为空”。")]),t._v(" "),n("p",[t._v("在实际编程时，一般不会把变量赋值给 "),n("code",[t._v("undefined")]),t._v("，这样可以保证所有值为 "),n("code",[t._v("undefined")]),t._v(" 的变量，都是从未赋值的自然状态。")]),t._v(" "),n("p",[n("code",[t._v("Null")]),t._v(" 类型也只有一个值 "),n("code",[t._v("null")]),t._v("。与 "),n("code",[t._v("undefined")]),t._v(" 不同，"),n("code",[t._v("null")]),t._v(" 是 JavaScript 关键字。所以在任何代码中，都可以放心用 "),n("code",[t._v("null")]),t._v(" 关键字来获取 "),n("code",[t._v("null")]),t._v(" 值。")]),t._v(" "),n("h3",{attrs:{id:"number"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#number"}},[t._v("#")]),t._v(" Number")]),t._v(" "),n("p",[n("code",[t._v("Number")]),t._v(" 类型表示通常意义上的“数字”。JavaScript 中的 "),n("code",[t._v("Number")]),t._v(" 类型有 "),n("code",[t._v("18437736874454810627")]),t._v("（即 "),n("code",[t._v("2^64 - 2^53 + 3")]),t._v("）个值。")]),t._v(" "),n("p",[t._v("JavaScript 中的 "),n("code",[t._v("Number")]),t._v(" 类型基本符合 "),n("strong",[t._v("IEEE 754-2008")]),t._v(" 规定的双精度浮点数规则，但是 JavaScript 为了表达几个额外的语言场景，规定了几个例外情况：")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("NaN")]),t._v("："),n("code",[t._v("9007199254740990")]),t._v(" 个特殊值被占用来表示")]),t._v(" "),n("li",[n("code",[t._v("Infinity")]),t._v("：无穷大")]),t._v(" "),n("li",[n("code",[t._v("-Infinity")]),t._v("：无穷小")])]),t._v(" "),n("p",[t._v("💡 值得注意的是，JavaScript 中有 "),n("code",[t._v("+0")]),t._v(" 和 "),n("code",[t._v("-0")]),t._v("，在加法类运算中它们没有区别，但是除法的场合则需要特别留意区分。")]),t._v(" "),n("p",[t._v("“忘记检测除以 "),n("code",[t._v("-0")]),t._v("，而得到无穷大”的情况经常会导致错误，而区分 "),n("code",[t._v("+0")]),t._v(" 和 "),n("code",[t._v("-0")]),t._v(" 的方式，正是检测 "),n("code",[t._v("1 / x")]),t._v(" 是 "),n("code",[t._v("Infinity")]),t._v(" 还是 "),n("code",[t._v("-Infinity")]),t._v("。")]),t._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[t._v("问题")]),t._v(" "),n("p",[t._v("为什么在 JavaScript 中，"),n("code",[t._v("0.1 + 0.2")]),t._v(" 不能 "),n("code",[t._v("= 0.3")]),t._v("？")])]),t._v(" "),n("p",[t._v("根据浮点数的定义，非整数的 "),n("code",[t._v("Number")]),t._v(" 类型无法用 "),n("code",[t._v("==")]),t._v("（"),n("code",[t._v("===")]),t._v(" 也不行）来比较。浮点数运算的精度问题导致等式左右的结果并不是严格相等的，而是相差了个微小的值。")]),t._v(" "),n("p",[t._v("所以实际上，这里错误的不是结论，而是比较的方法，正确的比较方法是使用 JavaScript 提供的最小精度值 "),n("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Number/EPSILON",target:"_blank",rel:"noopener noreferrer"}},[t._v("Number.EPSILON"),n("OutboundLink")],1),t._v("：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("abs")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.2")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" Number"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("EPSILON")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("检查等式两边差的绝对值是否小于最小精度，才是正确的比较浮点数的方法。")]),t._v(" "),n("h3",{attrs:{id:"symbol"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#symbol"}},[t._v("#")]),t._v(" Symbol")]),t._v(" "),n("p",[n("code",[t._v("Symbol")]),t._v(" 是 ES6 引入的新类型，它是一切非字符串的对象 "),n("code",[t._v("key")]),t._v(" 的集合。在 ES6 规范中，整个对象系统被用 "),n("code",[t._v("Symbol")]),t._v(" 重塑。")]),t._v(" "),n("p",[t._v("创建 "),n("code",[t._v("Symbol")]),t._v(" 方式是使用全局的 "),n("code",[t._v("Symbol")]),t._v(" 函数。"),n("code",[t._v("Symbol")]),t._v(" 可以具有字符串类型的描述，但是即使描述相同，"),n("code",[t._v("Symbol")]),t._v(" 也不相等：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" mySymbol "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Symbol")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my symbol'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("一些标准中提到的 "),n("code",[t._v("Symbol")]),t._v("，可以在全局的 "),n("code",[t._v("Symbol")]),t._v(" 函数的属性中找到。例如，可以使用 "),n("code",[t._v("Symbol.iterator")]),t._v(" 来自定义 "),n("code",[t._v("for..of")]),t._v(" 在对象上的行为：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" o "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v("\no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Symbol"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("iterator"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" v "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" o\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" done"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" v "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("of")]),t._v(" o"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("v"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 0 1 2 3 ... 9")]),t._v("\n")])])]),n("p",[t._v("这里给对象 "),n("code",[t._v("o")]),t._v(" 添加了 "),n("code",[t._v("Symbol.iterator")]),t._v(" 属性，并且按照迭代器的要求定义了一个 "),n("code",[t._v("0")]),t._v(" 到 "),n("code",[t._v("10")]),t._v(" 的迭代器， 之后用 "),n("code",[t._v("for (var v of o)")]),t._v(" 就可以调用这个函数，然后可以根据函数的行为，产生一个 "),n("code",[t._v("for..of")]),t._v(" 的行为。")]),t._v(" "),n("p",[t._v("这些标准中被称为“总所周知”的 "),n("code",[t._v("Symbol")]),t._v("，也构成了语言的一类接口形式。它们允许编写与语言结合更紧密的 API。")]),t._v(" "),n("h3",{attrs:{id:"object"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#object"}},[t._v("#")]),t._v(" Object")]),t._v(" "),n("p",[t._v("在 JavaScript 中，对象的定义是“属性的集合”。属性分为数据属性和访问器属性，二者都是 "),n("code",[t._v("key-value")]),t._v(" 结构，"),n("code",[t._v("key")]),t._v(" 可以是字符串或者 "),n("code",[t._v("Symbol")]),t._v(" 类型。")]),t._v(" "),n("p",[t._v("提到对象，必须要提到一个概念：类。")]),t._v(" "),n("p",[t._v("因为 C++ 和 Java 的成功，在这两门语言中，每个类都是一个类型，二者几乎相同，以至于很多人常常会把 JavaScript 的“类”与类型混淆。")]),t._v(" "),n("p",[t._v("事实上，"),n("strong",[t._v("JavaScript 中的“类”仅仅是运行时对象的一个私有属性，而 JavaScript 中是无法自定义类型的")]),t._v("。")]),t._v(" "),n("p",[t._v("JavaScript 中的几个基本类型，都在对象类型中有一个“亲戚”，它们是：")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("Number")])]),t._v(" "),n("li",[n("code",[t._v("String")])]),t._v(" "),n("li",[n("code",[t._v("Boolean")])]),t._v(" "),n("li",[n("code",[t._v("Symbol")])])]),t._v(" "),n("p",[t._v("所以， 必须认识到 "),n("code",[t._v("3")]),t._v(" 和 "),n("code",[t._v("New Number(3)")]),t._v(" 是完全不同的值，它们一个是 "),n("code",[t._v("Number")]),t._v(" 类型，一个是对象类型。")]),t._v(" "),n("p",[n("code",[t._v("Number")]),t._v("、"),n("code",[t._v("String")]),t._v(" 和 "),n("code",[t._v("Boolean")]),t._v("，三个构造器是两用的。当跟 "),n("code",[t._v("new")]),t._v(" 搭配时，它们产生对象；当直接调用时，它们表示强制类型转换。")]),t._v(" "),n("p",[n("code",[t._v("Symbol")]),t._v(" 函数比较特殊，直接用 "),n("code",[t._v("new")]),t._v(" 调用它会抛出错误，但它仍然是 "),n("code",[t._v("Symbol")]),t._v(" 对象的构造器。")]),t._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[t._v("问题")]),t._v(" "),n("p",[t._v("为什么给对象添加的方法能用在基本类型上？")])]),t._v(" "),n("p",[t._v("JavaScript 语言设计上视图模糊对象和基本类型之间的关系，日常代码可以把对象的方法在基本类型上使用，比如：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'abc'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("charAt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> 'a'")]),t._v("\n")])])]),n("p",[t._v("甚至在原型上添加方法，都可以应用于基本类型。比如以下代码中，在 "),n("code",[t._v("Symbol")]),t._v(" 原型上添加了 "),n("code",[t._v("hello")]),t._v(" 方法，在任何 "),n("code",[t._v("Symbol")]),t._v(" 类型变量下都可以调用:")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Symbol")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("hello")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Symbol")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> symbol, a 并非对象")]),t._v("\na"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("hello")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("              "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> 'hello', 有效")]),t._v("\n")])])]),n("p",[t._v("原因就是 "),n("code",[t._v(".")]),t._v(" 运算符提供了装箱操作，它会"),n("strong",[t._v("根据基础类型构造一个临时对象")]),t._v("，使得能在基础类型上调用对应对象的方法。")]),t._v(" "),n("h2",{attrs:{id:"类型判断"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#类型判断"}},[t._v("#")]),t._v(" 类型判断")]),t._v(" "),n("p",[t._v("JavaScript 有三种方法，可以确定一个值到底是什么类型：")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("typeof")]),t._v(" 运算符")]),t._v(" "),n("li",[n("code",[t._v("instanceof")]),t._v(" 运算符")]),t._v(" "),n("li",[n("code",[t._v("Object.prototype.toString")]),t._v(" 方法")])]),t._v(" "),n("h3",{attrs:{id:"typeof"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#typeof"}},[t._v("#")]),t._v(" typeof")]),t._v(" "),n("p",[n("code",[t._v("typeof")]),t._v(" 运算符可以返回一个值的数据类型。对于基本类型，除了 "),n("code",[t._v("null")]),t._v(" 都可以返回正确的类型：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> 'number'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1'")]),t._v("          "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> 'string'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> 'undefined'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("         "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> 'boolean'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Symbol")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("     "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> 'symbol'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("         "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> 'object'")]),t._v("\n")])])]),n("p",[t._v("对于引用类型，除了函数都会返回 "),n("code",[t._v("object")]),t._v("：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("           "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> 'object'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("           "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> 'object'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> 'function'")]),t._v("\n")])])]),n("p",[t._v("对于 "),n("code",[t._v("undefined")]),t._v(" ，返回 "),n("code",[t._v("'undefined'")]),t._v("：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> 'undefined'")]),t._v("\n")])])]),n("p",[t._v("利用这一点，"),n("code",[t._v("typeof")]),t._v(" 可以用来检查一个没有声明的变量，而不报错：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("v         "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ReferenceError: v is not defined")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" v  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> 'undefined'")]),t._v("\n")])])]),n("p",[t._v("实际编程中，这个特点通常用在判断语句：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 错误的写法")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("v"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...  ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ReferenceError: v is not defined")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 正确的写法")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" v "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'undefined'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"instanceof"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#instanceof"}},[t._v("#")]),t._v(" instanceof")]),t._v(" "),n("p",[n("code",[t._v("instanceof")]),t._v(" 运算符返回一个布尔值，表示对象是否为某个构造函数的实例。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" v "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vehicle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nv "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vehicle")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> true")]),t._v("\n")])])]),n("p",[t._v("上面代码中，对象 "),n("code",[t._v("v")]),t._v(" 是构造函数 "),n("code",[t._v("Vehicle")]),t._v(" 的实例，所以返回 "),n("code",[t._v("true")]),t._v("。")]),t._v(" "),n("p",[n("code",[t._v("instanceof")]),t._v(" 运算符的左边是实例对象，右边是构造函数。它会检查右边构造函数的原型对象 ("),n("code",[t._v("prototype")]),t._v(")，是否在左边对象的原型链上。因此，下面两种写法是等价的：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("v "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vehicle")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 等同于")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vehicle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isPrototypeof")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("v"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("由于 "),n("code",[t._v("instanceof")]),t._v(" 检查整个原型链，因此同一个实例对象，可能会对多个构造函数都返回 "),n("code",[t._v("true")]),t._v("。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" d "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nd "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> true")]),t._v("\nd "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> true")]),t._v("\n")])])]),n("p",[t._v("由于任意对象（除了 "),n("code",[t._v("null")]),t._v("）都是 "),n("code",[t._v("Object")]),t._v(" 的实例，所以 "),n("code",[t._v("instanceof")]),t._v(" 运算符可以判断一个值是否为非 "),n("code",[t._v("null")]),t._v(" 的对象。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" obj "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" foo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nobj "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> true")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> false")]),t._v("\n")])])]),n("p",[n("code",[t._v("instanceof")]),t._v(" 运算符的一个好处是，判断值的类型：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" x "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" y "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nx "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Array")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> true")]),t._v("\ny "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> true")]),t._v("\n")])])]),n("div",{staticClass:"custom-block danger"},[n("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),n("p",[n("code",[t._v("instanceof")]),t._v(" 运算符只能用于对象，不适用于原始类型的值。")])]),t._v(" "),n("p",[t._v("此外，对于 "),n("code",[t._v("undefined")]),t._v(" 和 "),n("code",[t._v("null")]),t._v("，"),n("code",[t._v("instanceof")]),t._v(" 运算符总是返回 "),n("code",[t._v("false")]),t._v("：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> false")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v("      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> false")]),t._v("\n")])])]),n("p",[t._v("利用 "),n("code",[t._v("instanceof")]),t._v(" 运算符，还可以巧妙地解决，调用构造函数时，忘了加 "),n("code",[t._v("new")]),t._v(" 命令的问题：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Fubar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("foo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Fubar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_foo "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" foo\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_bar "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" bar\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Fubar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("foo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("上面代码使用 "),n("code",[t._v("instanceof")]),t._v(" 运算符，在函数体内部判断 "),n("code",[t._v("this")]),t._v(" 关键字是否为构造函数 "),n("code",[t._v("Fubar")]),t._v(" 的实例。如果不是，就表明忘了加 "),n("code",[t._v("new")]),t._v(" 的命令。")]),t._v(" "),n("h3",{attrs:{id:"object-prototype-tostring"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#object-prototype-tostring"}},[t._v("#")]),t._v(" Object.prototype.toString")]),t._v(" "),n("p",[n("code",[t._v("Object.prototype.toString")]),t._v(" 方法返回对象的类型字符串，可以用来判断一个值的类型：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" obj "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nobj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "[object Object]"')]),t._v("\n")])])]),n("p",[t._v("上面代码结果返回一个字符串 "),n("code",[t._v("[object Object]")]),t._v("，其中第二个 "),n("code",[t._v("Object")]),t._v(" 表示该值的构造函数。这是一个十分有用的判断数据类型的方法。")]),t._v(" "),n("p",[t._v("由于实例对象可能会自定义 "),n("code",[t._v("toString")]),t._v(" 方法，覆盖掉 "),n("code",[t._v("Object.prototype.toString")]),t._v(" 方法，所以为了得到类型字符串，最好直接使用 "),n("code",[t._v("Object.prototype.toString")]),t._v(" 方法。")]),t._v(" "),n("p",[t._v("通过函数的 "),n("code",[t._v("call")]),t._v(" 方法，可以在任意值上调用这个方法，帮助判断这个值的类型。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("不同数据类型的 "),n("code",[t._v("Object.prototype.toString")]),t._v(" 方法返回值如下：")]),t._v(" "),n("ul",[n("li",[t._v("数值：返回 "),n("code",[t._v("[object Number]")])]),t._v(" "),n("li",[t._v("字符串：返回 "),n("code",[t._v("[object String]")])]),t._v(" "),n("li",[t._v("布尔值：返回 "),n("code",[t._v("[object Boolean]")])]),t._v(" "),n("li",[n("code",[t._v("undefined")]),t._v("：返回  "),n("code",[t._v("[object Undefined]")])]),t._v(" "),n("li",[n("code",[t._v("null")]),t._v("：返回 "),n("code",[t._v("[object Null]")])]),t._v(" "),n("li",[t._v("数组：返回 "),n("code",[t._v("[object Array]")])]),t._v(" "),n("li",[n("code",[t._v("arguments")]),t._v(" 对象：返回 "),n("code",[t._v("[object Arguments]")])]),t._v(" "),n("li",[t._v("函数：返回 "),n("code",[t._v("[object Function]")])]),t._v(" "),n("li",[n("code",[t._v("Error")]),t._v(" 对象：返回 "),n("code",[t._v("[object Error]")])]),t._v(" "),n("li",[n("code",[t._v("Date")]),t._v(" 对象：返回 "),n("code",[t._v("[object Date]")])]),t._v(" "),n("li",[n("code",[t._v("Math")]),t._v(" 对象：返回 "),n("code",[t._v("[object Math]")])]),t._v(" "),n("li",[n("code",[t._v("RegExp")]),t._v(" 对象：返回 "),n("code",[t._v("[object RegExp]")])]),t._v(" "),n("li",[t._v("其他对象：返回 "),n("code",[t._v("[object Object]")])])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> '[object Date]'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> '[object String]'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("       "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> '[object Math]'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> '[object Undefined]'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("       "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -> '[object Null]'")]),t._v("\n")])])]),n("p",[t._v("这就说，"),n("code",[t._v("Object.prototype.toString")]),t._v(" 可以看出一个值到底是什么类型：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "[object Number]"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("       "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "[object String]"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("     "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "[object Boolean]"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "[object Undefined]"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("     "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "[object Null]"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("     "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "[object Math]"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("       "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "[object Object]"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("       "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "[object Array]"')]),t._v("\n")])])]),n("p",[t._v("利用这个特性，可以写出一个比 "),n("code",[t._v("typeof")]),t._v(" 运算符更准确的类型判断函数：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("type")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("o")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" s "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("o"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" s"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("match")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/\\[object (.*?)\\]/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toLowerCase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "object"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "array"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("         "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "number"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "null"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("          "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "undefined"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/abcd/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "regex"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "date"')]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports},555:function(t,s,a){t.exports=a.p+"assets/img/02-data-type.ad6b52ff.jpg"}}]);