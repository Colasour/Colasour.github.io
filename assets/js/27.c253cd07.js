(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{300:function(v,_,t){"use strict";t.r(_);var e=t(35),s=Object(e.a)({},(function(){var v=this,_=v.$createElement,e=v._self._c||_;return e("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[e("h1",{attrs:{id:"frontmatter-title"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#frontmatter-title"}},[v._v("#")]),v._v(" "+v._s(v.$frontmatter.title))]),v._v(" "),e("h2",{attrs:{id:"uri"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#uri"}},[v._v("#")]),v._v(" URI")]),v._v(" "),e("p",[e("strong",[v._v("Uniform Resource Identifier（统一资源标识符，URI）")]),v._v("，俗称“网络地址”，“网址”。")]),v._v(" "),e("p",[v._v("严格地说，URI 不完全等同于网址，它含有 URL 和 URN 两个部分。在 HTTP 世界里用的网址实际上是 "),e("strong",[v._v("Uniform Resource Locator（统一资源定位符，URL）")]),v._v("，但因为 URL 实在太普及了，所以常常把这两者简单地视为相等。")]),v._v(" "),e("h2",{attrs:{id:"uri-格式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#uri-格式"}},[v._v("#")]),v._v(" URI 格式")]),v._v(" "),e("p",[v._v("URI 本质是一个字符串，作用是"),e("strong",[v._v("唯一地标记资源的位置或者名字")]),v._v("。它不仅能够标记万维网的资源，也可以标记其他的，如邮件系统、本地文件系统等任意资源。而“资源”既可以是存在磁盘上的静态文本、页面数据，也可以是由 Java、PHP 提供的动态范围。")]),v._v(" "),e("p",[e("img",{attrs:{src:t(506),alt:"URI"}})]),v._v(" "),e("h3",{attrs:{id:"scheme"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#scheme"}},[v._v("#")]),v._v(" scheme")]),v._v(" "),e("p",[e("code",[v._v("scheme")]),v._v("，释义为“"),e("strong",[v._v("方案名")]),v._v("”或者“"),e("strong",[v._v("协议名")]),v._v("”，表示"),e("strong",[v._v("资源应该使用哪种协议")]),v._v("来访问。")]),v._v(" "),e("p",[v._v("最常见的 "),e("code",[v._v("http")]),v._v(" 表示使用 HTTP 协议，另外还有 "),e("code",[v._v("https")]),v._v(" 表示使用经过加密、安全的 HTTPS 协议。此外还有其他不是很常见的如 "),e("code",[v._v("ftp")]),v._v("、"),e("code",[v._v("ldap")]),v._v("、"),e("code",[v._v("file")]),v._v("、"),e("code",[v._v("news")]),v._v(" 等。")]),v._v(" "),e("p",[v._v("浏览器或者应用程序看到 URI 的 "),e("code",[v._v("scheme")]),v._v("，就知道下一步如何走了，它会调用相应的 HTTP 或者 HTTPS 下层 API。显然，如果一个 URI 没有提供 "),e("code",[v._v("scheme")]),v._v("，即使后面的地址再完善，也是无法处理的。")]),v._v(" "),e("h3",{attrs:{id:"host"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#host"}},[v._v("#")]),v._v(" host")]),v._v(" "),e("p",[v._v("在 "),e("code",[v._v("scheme")]),v._v(" 之后，必须是"),e("strong",[v._v("三个特定的字符")]),v._v(" "),e("code",[v._v("://")]),v._v("，它把 "),e("code",[v._v("scheme")]),v._v(" 和后面的部分分离开。")]),v._v(" "),e("p",[v._v("在 "),e("code",[v._v("://")]),v._v(" 之后，是被称为 "),e("code",[v._v("authority")]),v._v(" 的部分，表示"),e("strong",[v._v("资源所在的主机名")]),v._v("，通常的形式是 "),e("code",[v._v("host:port")]),v._v("，即主机名加端口号。")]),v._v(" "),e("p",[v._v("主机名可以是 IP 地址或者域名的形式，必须要有，否则浏览器就会找不到服务器。但端口号有时可以省略，浏览器等客户端会依据 "),e("code",[v._v("scheme")]),v._v(" 使用默认的端口号，例如 HTTP 协议的默认端口号是 "),e("code",[v._v("80")]),v._v("，HTTPS 的默认端口号是 "),e("code",[v._v("443")]),v._v("。")]),v._v(" "),e("h3",{attrs:{id:"part"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#part"}},[v._v("#")]),v._v(" part")]),v._v(" "),e("p",[v._v("有了协议名和主机地址、端口号，再加上后面"),e("strong",[v._v("标记资源所在位置")]),v._v("的 "),e("code",[v._v("path")]),v._v("，浏览器就可以连接服务器访问资源了。")]),v._v(" "),e("p",[v._v("URI 里 "),e("code",[v._v("path")]),v._v(" 采用了类似文件系统“目录”“路径”的表示方式，因为早期互联网上的计算机多是 UNIX 系统，所以采用 UNIX 的 "),e("code",[v._v("/")]),v._v(" 风格。")]),v._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",[v._v("URI 的 "),e("code",[v._v("path")]),v._v(" 部分"),e("strong",[v._v("必须")]),v._v("以 "),e("code",[v._v("/")]),v._v(" 开始，也就是必须包含 "),e("code",[v._v("/")]),v._v("，不要把 "),e("code",[v._v("/")]),v._v(" 误认为属于前面的 "),e("code",[v._v("authority")]),v._v("。")])]),v._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[v._v("http"),e("span",{pre:!0,attrs:{class:"token operator"}},[v._v(":")]),e("span",{pre:!0,attrs:{class:"token comment"}},[v._v("//nginx.org")]),v._v("\nhttp"),e("span",{pre:!0,attrs:{class:"token operator"}},[v._v(":")]),e("span",{pre:!0,attrs:{class:"token comment"}},[v._v("//www.chrono.com:8080/11-1")]),v._v("\nhttp"),e("span",{pre:!0,attrs:{class:"token operator"}},[v._v(":")]),e("span",{pre:!0,attrs:{class:"token comment"}},[v._v("//tools.ietf.org/html/rfc7230")]),v._v("\nfile"),e("span",{pre:!0,attrs:{class:"token operator"}},[v._v(":")]),e("span",{pre:!0,attrs:{class:"token comment"}},[v._v("///D:/http_study/www/")]),v._v("\n")])])]),e("p",[v._v("第一个 URI 协议名是 "),e("code",[v._v("http")]),v._v("，主机名是 "),e("code",[v._v("nginx.org")]),v._v("，端口号省略，所以是默认的 "),e("code",[v._v("80")]),v._v("，而路径部分也省略，默认就是一个 "),e("code",[v._v("/")]),v._v("，表示根目录。")]),v._v(" "),e("p",[v._v("第二个 URI 协议名是 "),e("code",[v._v("http")]),v._v("，主机名是 "),e("code",[v._v("www.chrono.com")]),v._v("，端口号是 "),e("code",[v._v("8080")]),v._v("，路径是 "),e("code",[v._v("/11-1")]),v._v("。")]),v._v(" "),e("p",[v._v("第三个 URI 协议名是 "),e("code",[v._v("http")]),v._v("，主机名是 "),e("code",[v._v("tools.ietf.org")]),v._v("，端口号省略，所以是默认的 "),e("code",[v._v("80")]),v._v("，路径是 "),e("code",[v._v("/html/rfc7230")]),v._v("。")]),v._v(" "),e("p",[v._v("第四个 URI 协议名是 "),e("code",[v._v("file")]),v._v("，表示这是本地文件，之后的 "),e("code",[v._v("///")]),v._v(" 的前两个属于 URI 特殊分隔符 "),e("code",[v._v("://")]),v._v("，"),e("code",[v._v("/D:/http_study/www/")]),v._v(" 是路径，中间的主机名被省略了。")]),v._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",[e("code",[v._v("file")]),v._v(" 协议类型的 URI 特例：它允许省略主机名，默认是本机的 "),e("code",[v._v("localhost")]),v._v("。")])]),v._v(" "),e("h3",{attrs:{id:"query"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#query"}},[v._v("#")]),v._v(" query")]),v._v(" "),e("p",[v._v("使用“协议名 + 主机名 + 路径”的方式，已经可以精确定位网络上的任何资源了，但这还不够，有时还想在操作资源的时候附加一些额外的修饰参数。")]),v._v(" "),e("p",[v._v("在 URI 后面还有一个 "),e("code",[v._v("query")]),v._v(" 部分，它在 "),e("code",[v._v("path")]),v._v(" 之后，用一个 "),e("code",[v._v("?")]),v._v(" 开始，但不包含 "),e("code",[v._v("?")]),v._v("，表示对资源附加的额外要求。")]),v._v(" "),e("p",[v._v("查询参数 "),e("code",[v._v("query")]),v._v(" 有一套自己的格式，是多个 "),e("code",[v._v("key=value")]),v._v(" 的字符串，这些 "),e("code",[v._v("key-value")]),v._v(" 值用字符 "),e("code",[v._v("&")]),v._v(" 连接，浏览器和客户端都可以按照这个格式把长串的查询参数解析成可理解的字典或关联数组形式。")]),v._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[v._v("http"),e("span",{pre:!0,attrs:{class:"token operator"}},[v._v(":")]),e("span",{pre:!0,attrs:{class:"token comment"}},[v._v("//www.chrono.com:8080/11-1?uid=1234&name=mario&referer=xxx")]),v._v("\n")])])]),e("p",[v._v("Chrome 的开发者工具也能解码出 "),e("code",[v._v("query")]),v._v(" 里的 "),e("code",[v._v("key-value")]),v._v(" ：")]),v._v(" "),e("p",[e("img",{attrs:{src:t(507),alt:"query"}})]),v._v(" "),e("h2",{attrs:{id:"uri-完整格式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#uri-完整格式"}},[v._v("#")]),v._v(" URI 完整格式")]),v._v(" "),e("p",[e("img",{attrs:{src:t(508),alt:"URI-full"}})]),v._v(" "),e("p",[v._v("这个“真正”形态比基本形态多了两个部分：")]),v._v(" "),e("ul",[e("li",[v._v("身份信息 "),e("code",[v._v("user:passwd@")]),v._v("：表示登录主机时的用户名和密码，但现在已经不土建使用这种形式了，因为它把敏感信息以明文形式暴露出来，存在严重的安全隐患")]),v._v(" "),e("li",[v._v("片段标识符 "),e("code",[v._v("#fragment")]),v._v("：它是 URI 所定位的资源内部的一个锚点，或者说是标签，浏览器可以在获取资源后直接跳转到它指示的位置")])]),v._v(" "),e("p",[v._v("但片段标识符仅能由浏览器这样的客户端使用，服务器是看不到的。也就是说，浏览器永远不会把带 "),e("code",[v._v("#fragment")]),v._v(" 的 URI 发给服务器，服务器也永远也不会用这种方式取处理资源的片段。")]),v._v(" "),e("h2",{attrs:{id:"uri-编码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#uri-编码"}},[v._v("#")]),v._v(" URI 编码")]),v._v(" "),e("p",[v._v("URI 引入了编码机制，对于 ASCII 码以外的字符集和特殊字符做一个特殊的操作，把它们转换成与 URI 语义不冲突的形式。这在 RFC 规范里称为 "),e("code",[v._v("escape")]),v._v(" 和 "),e("code",[v._v("unescape")]),v._v("，俗称“转义”。")]),v._v(" "),e("p",[v._v("URI 转义的规则很简单，直接把非 ASCII 码或特殊字符转换成十六进制字节值，然后前面再加一个 "),e("code",[v._v("%")]),v._v("。例如，空格被转义成 "),e("code",[v._v("%20")]),v._v("，"),e("code",[v._v("?")]),v._v(" 被转义成 "),e("code",[v._v("%3F")]),v._v("。而中文、日本等则通常使用 UTF-8 编码后再转义，例如 "),e("code",[v._v("银河")]),v._v(" 会被转义成 "),e("code",[v._v("%E9%93%B6%E6%B2%B3")]),v._v("。")]),v._v(" "),e("p",[v._v("浏览器的地址栏里通常是不会看到这些转义后的“乱码”的，这实际上是浏览器一种“友好”表现，隐藏了 URI 编码后的“丑陋一面”：")]),v._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[v._v("http"),e("span",{pre:!0,attrs:{class:"token operator"}},[v._v(":")]),e("span",{pre:!0,attrs:{class:"token comment"}},[v._v("//www.chrono.com:8080/11-1?夸父逐日")]),v._v("\n")])])]),e("p",[v._v("先在 Chrome 的地址栏里输入这个 "),e("code",[v._v("query")]),v._v(" 里含有中文的 URI，然后点击地址栏，把它拷贝到其他的编辑器里，它就会“现出原形”：")]),v._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[v._v("http"),e("span",{pre:!0,attrs:{class:"token operator"}},[v._v(":")]),e("span",{pre:!0,attrs:{class:"token comment"}},[v._v("//www.chrono.com:8080/11-1?%E5%A4%B8%E7%88%B6%E9%80%90%E6%97%A5")]),v._v("\n")])])])])}),[],!1,null,null,null);_.default=s.exports},506:function(v,_,t){v.exports=t.p+"assets/img/URI.46581d7e.png"},507:function(v,_,t){v.exports=t.p+"assets/img/query.e4207308.png"},508:function(v,_,t){v.exports=t.p+"assets/img/URI-full.ff41d020.png"}}]);